<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>iSkin尚行美健康聯合診所 管理後台登入</title>
  <link rel="stylesheet" href="../css/site.css">
</head>
<body class="scroll">
  <div class="admin-wrap">
    <div class="side-bar">
      <div class="side-bar__logo">
        <img src="../images/admin-logo.jpg" alt="">
      </div>
      <div class="side-bar__nav">
        <ul>
          <li>
            <a class="side-bar__btn" href="client-list.html">客戶管理</a>
          </li>
          <li>
            <a class="side-bar__btn side-bar__btn--sub" href="#">員工管理</a>
            <div class="side-bar__sub-nav">
              <a href="employee-list.html">員工管理</a>
              <a href="">休假管理</a>
              <a href="employee-substitue.html">代班管理</a>
              <a href="">加診管理</a>
            </div>
          </li>
          <li>
            <a class="side-bar__btn" href="office-list.html">診間管理</a>
          </li>
          <li>
            <a class="side-bar__btn side-bar__btn--sub is-active" href="#">服務管理</a>
            <div class="side-bar__sub-nav">
              <a href="service-type-list.html">類別管理</a>
              <a href="service-course-list.html">療程管理</a>
              <a href="">群組管理</a>
              <a href="service-flow.html">流程管理</a>
              <a href="">步驟總表</a>
              <a href="service-special.html">醫療特例管理</a>
            </div>
          </li>
          <li>
            <a class="side-bar__btn" href="vacation-management.html">休假管理</a>
          </li>
          <li>
            <a class="side-bar__btn" href="account-list.html">帳號管理</a>
          </li>
          <li>
            <a class="side-bar__btn side-bar__btn--sub is-active" href="#">其它管理</a>
            <div class="side-bar__sub-nav">
              <a href="">診所時間</a>
              <a href="other-announce.html">佈告管理</a>
              <a href="other-message.html">簡訊管理</a>
              <a href="">回復設定</a>
            </div>
          </li>
          <li>
            <a class="side-bar__btn" href="overall-report.html">總體報表</a>
          </li>
          <li>
            <a class="side-bar__btn side-bar__btn--sub" href="">明細查詢</a>
            <div class="side-bar__sub-nav">
              <a href="work-detail-reserve.html">預約紀錄</a>
              <a href="">指派紀錄</a>
              <a href="work-detail.html">工作紀錄</a>
              <a href="">諮詢成交紀錄</a>
            </div>
          </li>
        </ul>
      </div>
      <button class="side-bar__btn-logout">登出</button>
    </div>
    <div class="admin-main">
      <div class="admin-header">
        <a class="admin-header__btn-back" href="service-type-list.html">返回</a>
        <h2>服務管理：流程</h2>
        <div class="admin-header__control">
          <div class="admin-header__account">
            <img class="admin-header__account-avatar" class="" src="https://picsum.photos/id/1005/120/120" alt="">
            <span class="admin-header__account-name">司徒法寶</span>
            <button class="admin-header__btn-logout">登出</button>
          </div>
        </div>
      </div>
      <div class="service-type-add">
        <div class="hint">
            <p>重要提示：新流程將於午夜12:00生效，有使用到此流程的預約將同步更新</p>
            <button>取消變更</button>
        </div>
        <div class="service-type-add__add">
            <h3>設定流程類型</h3>
            <div class="service-flow__type">
                <div class="service-flow__type__item">
                    <div class="checkBox"></div>
                    <label for="">群組流程</label>
                    <div class="service-course-add__select-wrap">
                        <select name="type">
                          <option value="0">選擇群組</option>
                        </select>
                    </div>
                </div>
                <div class="service-flow__type__item">
                    <div class="checkBox"></div>
                    <label for="">療程流程</label>
                    <div class="service-course-add__select-wrap">
                        <select name="type">
                          <option value="0">選擇療程</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="service-flow__item">
            <h3 class="pl-5">運作中流程</h3>
            <table class="admin-table service-flow__flow">
                <thead>
                  <tr class="bg-transparent">
                    <th>編號</th>
                    <th>步驟名稱</th>
                    <th>時間</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>1</td>
                    <td>報到</td>
                    <td>2</td>
                  </tr>
                  <tr>
                    <td>2</td>
                    <td>卸洗</td>
                    <td>2</td>
                  </tr>
                  <tr>
                    <td>3</td>
                    <td>拍照</td>
                    <td>2</td>
                  </tr>
                </tbody>
            </table>
        </div>
        <div class="service-type-add__add">
            <h3>新編輯流程</h3>
            <div class="service-flow__new">
                <div class="service-flow__new__title">
                    <div class="service-flow__new__icon"></div>
                    <div class="service-flow__new__num">編號</div>
                    <div class="service-flow__new__step">步驟名稱</div>
                    <div class="service-flow__new__time">時間</div>
                    <div class="service-flow__new__char">身份與專長</div>
                    <div class="service-flow__new__equi">器材</div>
                    <div class="service-flow__new__score">積分</div>
                    <div class="service-flow__new__btn"></div>
                </div>
            </div>
            <ul id="sortable">
                <li class="service-flow__new__item sortable_item">
                    <div class="service-flow__new__icon"><img src="../images/=.svg" alt=""></div>
                    <div class="service-flow__new__num">1</div>
                    <div class="service-flow__new__step">
                        <div class="service-course-add__select-wrap">
                            <select name="type">
                              <option value="0">報到</option>
                              <option value="1">卸洗</option>
                              <option value="2">醫師處置</option>
                              <option value="3">預約 衛教</option>
                              <option value="4">送客</option>
                            </select>
                        </div>
                    </div>
                    <div class="service-flow__new__time">
                        <input type="time">
                    </div>
                    <div class="service-flow__new__char">
                        <button>選擇身份與專長</button>
                    </div>
                    <div class="service-flow__new__equi">
                        <button>選擇器材</button>
                    </div>
                    <div class="service-flow__new__score">
                        <input type="text" placeholder="輸入積分">
                    </div>
                    <div class="service-flow__new__btn"><button>刪除</button></div>
                </li>
                <li class="service-flow__new__item sortable_item">
                    <div class="service-flow__new__icon"><img src="../images/=.svg" alt=""></div>
                    <div class="service-flow__new__num">2</div>
                    <div class="service-flow__new__step">
                        <div class="service-course-add__select-wrap">
                            <select name="type">
                              <option value="0">報到</option>
                              <option value="1" selected="selected">卸洗</option>
                              <option value="2">醫師處置</option>
                              <option value="3">預約 衛教</option>
                              <option value="4">送客</option>
                            </select>
                        </div>
                    </div>
                    <div class="service-flow__new__time">
                        <input type="time">
                    </div>
                    <div class="service-flow__new__char">
                        <button>選擇身份與專長</button>
                    </div>
                    <div class="service-flow__new__equi">
                        <button>選擇器材</button>
                    </div>
                    <div class="service-flow__new__score">
                        <input type="text" placeholder="輸入積分">
                    </div>
                    <div class="service-flow__new__btn"><button>刪除</button></div>
                </li>
                <li class="service-flow__new__item sortable_item">
                    <div class="service-flow__new__icon"><img src="../images/=.svg" alt=""></div>
                    <div class="service-flow__new__num">3</div>
                    <div class="service-flow__new__step">
                        <div class="service-course-add__select-wrap">
                            <select name="type">
                              <option value="0">報到</option>
                              <option value="1">卸洗</option>
                              <option value="2" selected="selected">醫師處置</option>
                              <option value="3">預約 衛教</option>
                              <option value="4">送客</option>
                            </select>
                        </div>
                    </div>
                    <div class="service-flow__new__time">
                        <input type="time">
                    </div>
                    <div class="service-flow__new__char">
                        <button>選擇身份與專長</button>
                    </div>
                    <div class="service-flow__new__equi">
                        <button>選擇器材</button>
                    </div>
                    <div class="service-flow__new__score">
                        <input type="text" placeholder="輸入積分">
                    </div>
                    <div class="service-flow__new__btn"><button>刪除</button></div>
                </li>
                <li class="service-flow__new__item sortable_item">
                    <div class="service-flow__new__icon"><img src="../images/=.svg" alt=""></div>
                    <div class="service-flow__new__num">4</div>
                    <div class="service-flow__new__step">
                        <div class="service-course-add__select-wrap">
                            <select name="type">
                              <option value="0">報到</option>
                              <option value="1" selected="selected">卸洗</option>
                              <option value="2">醫師處置</option>
                              <option value="3" selected="selected">預約 衛教</option>
                              <option value="4">送客</option>
                            </select>
                        </div>
                    </div>
                    <div class="service-flow__new__time">
                        <input type="time">
                    </div>
                    <div class="service-flow__new__char">
                        <button>選擇身份與專長</button>
                    </div>
                    <div class="service-flow__new__equi">
                        <button>選擇器材</button>
                    </div>
                    <div class="service-flow__new__score">
                        <input type="text" placeholder="輸入積分">
                    </div>
                    <div class="service-flow__new__btn"><button>刪除</button></div>
                </li>
                <li class="service-flow__new__item sortable_item">
                    <div class="service-flow__new__icon"><img src="../images/=.svg" alt=""></div>
                    <div class="service-flow__new__num">5</div>
                    <div class="service-flow__new__step">
                        <div class="service-course-add__select-wrap">
                            <select name="type">
                              <option value="0">報到</option>
                              <option value="1">卸洗</option>
                              <option value="2">醫師處置</option>
                              <option value="3">預約 衛教</option>
                              <option value="4" selected="selected">送客</option>
                            </select>
                        </div>
                    </div>
                    <div class="service-flow__new__time">
                        <input type="time">
                    </div>
                    <div class="service-flow__new__char">
                        <button>選擇身份與專長</button>
                    </div>
                    <div class="service-flow__new__equi">
                        <button>選擇器材</button>
                    </div>
                    <div class="service-flow__new__score">
                        <input type="text" placeholder="輸入積分">
                    </div>
                    <div class="service-flow__new__btn"><button>刪除</button></div>
                </li>
            </ul>
            <button class="service-flow__new__add">新增步驟</button>
            <button class="service-flow__new__save">儲存</button>
        </div>
        <div class="service-flow__item">
            <h3 class="pl-5">連續指派設定</h3>
            <div class="service-flow__setting">
                <h4>設定步驟</h4>
                <div class="service-flow__setting__inner">
                    <div class="service-flow__setting__item">
                        <label for="">開始步驟</label>
                        <div class="service-course-add__select-wrap">
                            <select name="type"></select>
                        </div>
                    </div>
                    <div class="service-flow__setting__item">
                        <label for="">結束步驟</label>
                        <div class="service-course-add__select-wrap">
                            <select name="type"></select>
                        </div>
                    </div>
                    <button>新增</button>
                </div>
            </div>
            <h4 class="pl-5">已儲存的連續指派</h4>
            <div class="service-flow__save">
                <table class="admin-table service-flow__flow">
                    <tbody>
                      <tr>
                        <td>開始步驟：報到</td>
                        <td>結束步驟：敷麻</td>
                        <td>刪除</td>
                      </tr>
                      <tr>
                        <td>開始步驟：報到</td>
                        <td>結束步驟：敷麻</td>
                        <td>刪除</td>
                      </tr>
                      <tr>
                        <td>開始步驟：報到</td>
                        <td>結束步驟：敷麻</td>
                        <td>刪除</td>
                      </tr>
                    </tbody>
                </table>
                <button class="service-flow__new__save">儲存</button>

            </div>
        </div>
      </div>
    </div>
  </div>
  <!--身份與專長設定-->
  <div class="service-course-setting is-active">
    <div class="service-course-setting__overlay">
      <div class="service-course-setting__inner small">
        <header class="service-course-setting__header">
          <h3>設定</h3>
          <button class="service-course-setting__btn-close"></button>
        </header>
        <div class="service-course-setting__content">
            <div class="modal-ui__iv">
                <h4>器材</h4>
                <div class="modal-ui__iv-list">
                  <button class="modal-ui__btn-iv">SRTG</button>
                  <button class="modal-ui__btn-iv is-active">SRTG22</button>
                  <button class="modal-ui__btn-iv">SRTG33</button>
                  <button class="modal-ui__btn-iv">SRTG44</button>
                  <button class="modal-ui__btn-iv">SRT55G</button>
                  <button class="modal-ui__btn-iv">SRTG6</button>
                  <button class="modal-ui__btn-iv">SRTG6</button>
                </div>
            </div>
            <div class="modal-ui__iv">
                <h4>數量</h4>
                <div class="modal-ui__input">
                    <span>此療程需要使用</span>
                    <input type="number">
                    <span>台</span>
                </div>
            </div>
            <div class="modal-ui__iv">
                <h4>時間</h4>
                <div class="modal-ui__input">
                    <span>此療程需要</span>
                    <input type="number">
                    <span>分鐘</span>
                </div>
            </div>
            <div class="modal-ui__row center">
                <button class="modal-ui__btn-cancel">取消</button>
                <button class="modal-ui__btn-confirm">確定</button>
              </div>
        </div>
      </div>
    </div>
  </div>
  <!--身份與專長設定-->
  <script src="../js/all.js"></script>
  <script src="../js/jquery-ui.min.js"></script>
  <script>
    $(function(){
      $('.side-bar__btn--sub').on('click', function(e){
        e.preventDefault()
        $(this).next().toggleClass('is-active')
      })

      $("#sortable").sortable({
        beforeStop: function(){
            $("#sortable").find(".service-flow__new__num").each(function (i) {
                let num = i + 1;
                $(this).text(num);
                if(num==1 || num==3 || num==5) {
                    $(this).parents("li").find(".service-flow__new__btn button").hide();
                }else {
                    let button = $("<button>刪除</button>")
                    $(this).parents("li").find(".service-flow__new__btn button").show();
                }
            })
        }
      });
      $("#sortable li").disableSelection();

      $(".checkBox").click(function(){
        $(this).toggleClass("active");
      })


      $(".service-flow__new__add").click(function() {
        let li = $("<li class='service-flow__new__item sortable_item'></li>");
        let icon = $("<div class='service-flow__new__icon'><img src='../images/=.svg'></div>");
        let liNum = $(".service-flow__new__item").length + 1;
        console.log(liNum );
        let num = $("<div class='service-flow__new__num'></div>").text(liNum);
        let step = $("<div class='service-flow__new__step'><div class='service-course-add__select-wrap'><select name='type'><option value='0'>報到</option><option value='1'>卸洗</option><option value='2'>醫師處置</option><option value='3'>預約 衛教</option><option value='4'>送客</option></select></div></div>");
        let time = $("<div class='service-flow__new__time'><input type='time'></div>");
        let char = $(" <div class='service-flow__new__char'><button>選擇身份與專長</button></div>");
        let equi = $("<div class='service-flow__new__equi'><button>選擇器材</button></div>");
        let score = $("<div class='service-flow__new__score'><input type='text' placeholder='輸入積分'></div>")
        let btn = $("<div class='service-flow__new__btn'><button>刪除</button></div>");
        li.append(icon, num, step, time, char, equi, score, btn);
        $("#sortable").append(li);
      })

    })


    
  </script>
</body>
</html>